{"ignition":{"config":{"merge":[{"compression":"","source":"data:,"}]},"version":"3.4.0"},"passwd":{"users":[{"groups":["docker"],"name":"prometheus"},{"groups":["docker"],"name":"loki"},{"groups":["docker"],"name":"grafana"}]},"storage":{"directories":[{"path":"/home/flatcar/.loki/minio_loki/minio_data/loki"},{"group":{"id":65534},"path":"/home/flatcar/.prometheus/data","user":{"id":65534},"mode":448},{"group":{"name":"prometheus"},"path":"/home/flatcar/.prometheus/config","user":{"name":"prometheus"}},{"group":{"id":472},"path":"/home/flatcar/.grafana/data","user":{"id":472}}],"files":[{"path":"/etc/systemd/network/static.network","contents":{"compression":"","source":"data:,%5BMatch%5D%0AName%3Deth0%0A%0A%5BNetwork%5D%0AAddress%3D172.20.5.15%2F16%0AGateway%3D172.20.0.1%0ANTP%3D172.20.0.1%0A"}},{"group":{"name":"loki"},"path":"/home/flatcar/.loki/loki/loki_config/config.yaml","user":{"name":"loki"},"contents":{"compression":"gzip","source":"data:;base64,H4sIAAAAAAAC/3xWTW/kNhK9N9D/oQAvsBe7pbbXO7Buu8gHBpjEgT1BjgRFliSmKVJTVXSPJsh/D0ip2/Z4El26xfeq+OqLlE4yKAy69Wgb6LRn3G62G0Z6Qmq2G4BBZFLesWBQUyRp4GZf1xnpaTKvkbv67r8Z8bFXHp/QN+BCF8/kxa0a9WdlYjCJCIMoFkI9cgP7OjvebkwcxxjK7i6w6GBQaWupgf31u129q3f7jE1aBjURdu5zA5WMU+XjwW03cAEskXSPTXkB6JxHnllwPK0AmCGFAyvrCI1Eml+4qBbsTKXk8W+YBcpiCCfvjBYXg+p05jVQVJILfbPdFE//FA3A4SnLLqLLs7yBCyOOkeZSlyWunL3O9YUpbFvFg5umtWAA2oh7QuWCxc/fll2ghWy0GVD5uGh/Q1IFX/UT8hyMckGQnrRv4JZXhAdNaNUqmW+yb33kVRDfNKWPmqrav7veXde7293+trmr6/pUsyLbILM64KycbeBff/z0/uf39+rh/v6j+vXx+4c/V2doCEU9s7+i/vK/x8ff7h++O9FvukgGc7OwzB4bEEq4YC4wmkTnte3mU0KaFemwNE+OOHnhJQvNi4ydq4Rji9aiVa+XAc5T9bxffnLzs/uCamxLx5eymgFH/bKqy99T/q6gozg2cF1f11f17dX+9qseyU1wWort72jkdSkKtWzSwNP+vFQq/ELyaZiWyr9YR3LRNnD9nyHLvZi0CFJQLvTIUvru4k3AFwAjCjmjdN8T9kt/rf1y8Zacj42DK6OBzA3klvRDZGlu1jTlYVt6XHskGXXQPZJK5M/t9Wx0V9/dZKOOYhAMtthhMNHmgYSJosQ2dSUeE8dpmdmi5Bjp4EL/anSsFl0RCoYcRqGtVnninydiX48FPFPV20ifMYseBfOPnhuov41mOUjKxBSkgf1tyUWm/n8Gi51OXi7hQzw4ODrvgTFY0CGGeYyJL6FNAim4Twn9fOVs9t25LAkS6x5BB7u2WyJ9Ck4H7WdxhkEi/Ei600HDB93yDj4OyAgsWhwXhibMm0qm5jJwU1UZ5l2/GO4i9dV2c5EdPz7bDegnSAwt5m6CFCxSPh8tDPG4BOQYEqO9LCJlwBk4Y4lzS3aRxnyaZrfltmHoIsEYWbIVFa1u2YeLDblITtwXhA61JEIujm00acQgJfpddvdD8UNYri8aCwAxwHHQ8m8u0V6Cj/EAWjL/FHbvZEjtzsSxWmNfjtLWx7YatQvVdOirc3JPaYrZxwN2SDmHMiC0yXn7gPlazVM0RJsRRiwSoI/I4IJE0PnmiSS7Nb/vO5hjgmNM3oJ3B8x21nEp+EJ1ob+EFPItW6o2IHTR+3h0oQfvAuZj56xxPQZXw6++Ff4KAAD//1+eXeY/CAAA"}},{"group":{"name":"prometheus"},"path":"/home/flatcar/.prometheus/create_config.sh","user":{"name":"prometheus"},"contents":{"compression":"gzip","source":"data:;base64,H4sIAAAAAAAC/3zLPQ7CMAxH8T2nMIIBBuILIO6SVP82lfIl24nK7RmRGLq94f2uFx4qHPfKqJNi0OQURk84h6M3MbrdjyCb0os4tQJec7AlCPsurcAShrJHnQ+HOnVENTp9f+k/JXtD6TkY6E0naGl13bc/+w0AAP///QTamL0AAAA="}},{"group":{"name":"prometheus"},"path":"/home/flatcar/.prometheus/prometheus.yml.template","user":{"name":"prometheus"},"contents":{"compression":"gzip","source":"data:;base64,H4sIAAAAAAAC/5xWf0/jRhD9P59ilFTynQS+OCEUrLZSKqiQenAIetdKFfJt1pN4Yb1r7Y4DUXXfvdq1TQyJ2zP5L7Mz782PN7teSb1gMh4AWG5YgYlQhGbNZAzud2xhBLdIQBnWHtB4AGnANZoNRDOwyLVKbQhnuGSlJBC2OYRcqJIwHADgmsmSkdCqxeM5zqsTBFNKtHtw/8gQ0v/CHjUVkMhRl97Lusy1T74q9BniXTS278OBj5sTMZ45L4sg2QKldVFMbcBhgUUj0II2wCQasvCYoQKu87xUgjMSagWPgjIPhk+ERjEJdmMJcwvvlpii8UUfgMFcE4IlbdgKD2DuAHOm2ArNe9+hOjyp8nCDcb9cK0HaxBDgE8sLicFgMHoRDVyrpViVFdPAZyrUygGwlptHPARLjARPqpia5RCImRWSjeHvQGrOZKYtxafj02lw5+g+apbW89GKIzCVQoFG6FRwJuWmGS+6VubAONcmdc15OYJgjwqCcOCAk6WQ6NMZwSEMl8JYSjxjuMnlsLFXomgfuGY0+nzRCPePmFAuDXxinOQGtEJAlRZaKC+PKi4ejOACDYKgwMK10TlShqUFQRblMhzU8mr1bORVea8XoFiOTnAsTTEFZoFVQoKv93rx80/3epE4l1++toVV66rCTWFpdA6UCVtXEPpJNaExBMVzTsHAT2wEn9ZojEhxn8TdeOqW1INtUbikqx3a7pjH3LkGZrZtr5fLm+scciQjuE0KRllD7hco+FAfBbWn5Rnm+NInIyoCv4jtWq+QHrV5qJj3aPWVWqMfJ+FkHI7Do/g0Go+Dg61lVlnuXjN8ub7qjT4Zd4CdXd2+KdXZ9HWqM7drAK/wjRuVxaQw+mnzBqaT8cnkJZO37NTBCjrkjGfYk2PW2ebtHn0vZOvm2Yu4EtQzu8k4jLoGh/aBdJF8ueyLGXZpYX7ze3+4qDvFhxM7jvojnjSAB1vLZMcS7TpFe7ymu1B70HcDJ9OOoi6FQm7YkpKL+ZtU7Rr2ms/Z/p/wrWxHu2yd98GWzaJZo3kD3fEeuj0FT7sW74KZhTa993jSAfebZMSZ6a/D2XPnOjHPfu2Jedy5LEqnfe+uqBPs5uL843eCDbfVVpoY7t6EZ5/rh9Q9gjG4h6+6FEnaGruBFsoiLw0m9kEUyRqNWG5iIFNWxbVf3BiGH/hKHC6E+pCWeZFsvxJCvhJDH1Aww3K7ReeyTNHnVSU/vOv/Fkbx0VH1WAEsmBU8YSVlTVBp3Wesq/OHf67/mibjKPl8e35zNb88/1a7FMzaR23Slsv1/Pb2z083Z9/+DQAA//+GaGYelwwAAA=="}}]},"systemd":{"units":[{"contents":"[Unit]\nDescription=run MinIO of Loki\nRequires=docker.service\nAfter=docker.service\n\n[Service]\nType=simple\nUser=loki\nGroup=loki\nExecStartPre=-/usr/bin/docker stop minio_loki\nExecStartPre=-/usr/bin/docker rm minio_loki\nExecStartPre=/usr/bin/docker pull quay.io/minio/minio\nExecStart=/usr/bin/docker run --name minio_loki\\\n --env-file /home/flatcar/.loki/minio_loki/.env\\\n -p 9000:9000 -p 9001:9001\\\n -v /home/flatcar/.loki/minio_loki/minio_data:/data\\\n quay.io/minio/minio server /data --console-address \":9001\"\n\n[Install]\nWantedBy=multi-user.target\n","enabled":true,"name":"minio_loki.service"},{"contents":"[Unit]\nDescription=run Loki\nRequires=docker.service\nAfter=docker.service\n\n[Service]\nType=simple\nUser=loki\nGroup=loki\nExecStartPre=-/usr/bin/docker stop loki\nExecStartPre=-/usr/bin/docker rm loki\nExecStartPre=/usr/bin/docker pull grafana/loki\nExecStart=/usr/bin/docker run --name loki\\\n --env-file /home/flatcar/.loki/minio_loki/.env\\\n -p 3100:3100\\\n -v /home/flatcar/.loki/loki/loki_config:/etc/loki\\\n grafana/loki -config.expand-env=true -config.file=/etc/loki/config.yaml\n\n[Install]\nWantedBy=multi-user.target\n","enabled":true,"name":"loki.service"},{"contents":"[Unit]\nDescription=run Prometheus\nRequires=docker.service\nAfter=docker.service\n\n[Service]\nType=simple\nWorkingDirectory=/home/flatcar\nUser=prometheus\nGroup=prometheus\nExecStartPre=-/usr/bin/docker stop prometheus\nExecStartPre=-/usr/bin/docker rm prometheus\nExecStartPre=/usr/bin/docker pull harbor.reyokatsu.net/management/prometheus:latest\nExecStartPre=-/usr/bin/sh /home/flatcar/.prometheus/create_config.sh\nExecStart=/usr/bin/docker run --name prometheus\\\n -p 9090:9090\\\n -v /home/flatcar/.prometheus/config:/config\\\n -v /home/flatcar/.prometheus/data:/prometheus\\\n harbor.reyokatsu.net/management/prometheus:latest\\\n --config.file=/config/prometheus.yml\n[Install]\nWantedBy=multi-user.target\n","enabled":true,"name":"prometheus.service"},{"contents":"[Unit]\nDescription=run Grafana dashboard\nRequires=docker.service\nAfter=docker.service\n\n[Service]\nType=simple\nWorkingDirectory=/home/flatcar\nUser=grafana\nGroup=grafana\nExecStartPre=-/usr/bin/docker stop grafana\nExecStartPre=-/usr/bin/docker rm grafana\nExecStartPre=/usr/bin/docker pull harbor.reyokatsu.net/management/grafana-enterprise:latest\nExecStart=/usr/bin/docker run --name grafana\\\n  -p 3000:3000\\\n  -v /home/flatcar/.grafana/data:/var/lib/grafana\\\n  harbor.reyokatsu.net/management/grafana-enterprise:latest\n[Install]\nWantedBy=multi-user.target\n","enabled":true,"name":"grafana.service"}]}}
