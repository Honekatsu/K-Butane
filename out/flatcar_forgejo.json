{"ignition":{"config":{"merge":[{"compression":"","source":"data:,"}]},"version":"3.4.0"},"passwd":{"users":[{"groups":["docker"],"name":"forgejo","uid":1500},{"groups":["docker"],"name":"postgres"},{"groups":["docker"],"name":"minio"},{"groups":["docker"],"name":"lldap"}]},"storage":{"directories":[{"group":{"name":"forgejo"},"path":"/home/flatcar/.forgejo/data","user":{"name":"forgejo"}},{"group":{"name":"postgres"},"path":"/home/flatcar/.postgres-forgejo/data","user":{"name":"postgres"}},{"group":{"name":"minio"},"path":"/home/flatcar/.minio-forgejo/data/forgejo","user":{"name":"minio"}}],"files":[{"path":"/etc/systemd/network/static.network","contents":{"compression":"","source":"data:,%5BMatch%5D%0AName%3Deth0%0A%0A%5BNetwork%5D%0AAddress%3D172.20.20.1%2F16%0AGateway%3D172.20.0.1%0ANTP%3D172.20.0.1%0A"}},{"path":"/etc/hostname","contents":{"compression":"","source":"data:,git.reyokatsu.net"}},{"group":{"name":"forgejo"},"path":"/home/flatcar/.forgejo/.env","user":{"name":"forgejo"},"contents":{"compression":"gzip","source":"data:;base64,H4sIAAAAAAAC/4zRUU/CMBAH8Hc/DIwhMZL0YWwHVEa79DoNT5epdU4DI20x8dsbMCiwmpjs5fL/XXZ3LREUlTxjg1EUXR2q2bGaSjWDO0nkjP0wljK5TLhgdeN71ny275V3u97G+A5EnP8fKyk1lSpnr95v3bjf77T0Oz1zrQsqpNJsGAUG3f//kMZxHAxzjhrE0XRIPkVCnShNCOoeFPN2Z37Vc+Wrx8oZomxCelUA27bO19a4kJlL1GxwE/fiaP8NxqPrYRyCIlkCe2ltbd7aUL5/HBYKigTxITuJ1sbb5skRgUgmOWQX8zvf2qo2RKilSmbwvcO62TRtAC254JJAZIXk4nyT2/Pjn3ckaQqItIAV8dPhLhhCqkCf6L/ppEwXoH9O9BUAAP//j7PH/LsCAAA="},"mode":384},{"group":{"name":"postgres"},"path":"/home/flatcar/.postgres-forgejo/.env","user":{"name":"postgres"},"contents":{"compression":"","source":"data:,POSTGRES_USER%3D%0APOSTGRES_PASSWORD%3D%0APOSTGRES_DB%3Dforgejo%0ATZ%3D%22Asia%2FTokyo%22%0A"},"mode":384},{"group":{"name":"minio"},"path":"/home/flatcar/.minio-forgejo/.env","user":{"name":"minio"},"contents":{"compression":"","source":"data:,MINIO_ROOT_USER%3D%0AMINIO_ROOT_PASSWORD%3D%0A"},"mode":384},{"group":{"name":"lldap"},"path":"/home/flatcar/.lldap-forgejo/.env","user":{"name":"lldap"},"contents":{"compression":"","source":"data:,TZ%3DAsia%2FTokyo%0ALLDAP_JWT_SECRET%3D%0ALLDAP_KEY_SEED%3D%0ALLDAP_LDAP_BASE_DN%3Ddc%3Dpeach-ktq%2Cdc%3Ddev%0ALLDAP_LDAP_USER_PASS%3D%0A"},"mode":384}]},"systemd":{"units":[{"contents":"[Unit]\nDescription=run forgejo\nRequires=systemd-sysupdate.service\nAfter=systemd-sysupdate.service\n\n[Service]\nType=simple\nRestart=always\nRestartSec=10\nWorkingDirectory=/home/flatcar\nUser=forgejo\nGroup=forgejo\nExecStartPre=-/usr/bin/docker stop forgejo\nExecStartPre=-/usr/bin/docker rm forgejo\nExecStartPre=/usr/bin/docker pull harbor.reyokatsu.net/others/forgejo:10\nExecStart=/usr/bin/docker run --rm --name forgejo\\\n  -v /home/flatcar/.forgejo/data:/data\\\n  -v /etc/timezone:/etc/timeozone:ro\\\n  -v /etc/localtime:/etc/localtime:ro\\\n  -p 3000:3000\\\n  -p 222:22\\\n  --env-file /home/flatcar/.forgejo/.env\\\n  harbor.reyokatsu.net/others/forgejo:10\n\n[Install]\nWantedBy=multi-user.target\n","enabled":false,"name":"forgejo.service"},{"contents":"[Unit]\nDescription=run postgres\nRequires=systemd-sysupdate.service\nAfter=systemd-sysupdate.service\n\n[Service]\nType=simple\nRestart=always\nRestartSec=10\nWorkingDirectory=/home/flatcar\nUser=postgres\nGroup=postgres\nExecStartPre=-/usr/bin/docker stop postgres-forgejo\nExecStartPre=-/usr/bin/docker rm postgres-forgejo\nExecStartPre=/usr/bin/docker pull harbor.reyokatsu.net/database/postgres\nExecStart=/usr/bin/docker run --rm --name postgres-forgejo\\\n  -v /home/flatcar/.postgres-forgejo/data:/var/lib/postgresql/data\\\n  -p 5432:5432\\\n  --env-file /home/flatcar/.postgres-forgejo/.env\\\n  harbor.reyokatsu.net/database/postgres:latest\n[Install]\nWantedBy=multi-user.target\n","enabled":false,"name":"postgres-forgejo.service"},{"contents":"[Unit]\nDescription=run minio\nRequires=systemd-sysupdate.service\nAfter=systemd-sysupdate.service\n\n[Service]\nType=simple\nRestart=always\nRestartSec=10\nWorkingDirectory=/home/flatcar\nUser=minio\nGroup=minio\nExecStartPre=-/usr/bin/docker stop minio-forgejo\nExecStartPre=-/usr/bin/docker rm minio-forgejo\nExecStartPre=/usr/bin/docker pull quay.io/minio/minio\nExecStart=/usr/bin/docker run --name minio-forgejo\\\n  -p 9000:9000 -p 9001:9001\\\n  -v /home/flatcar/.minio-forgejo/data:/data\\\n  --env-file /home/flatcar/.minio-forgejo/.env\\\n  quay.io/minio/minio server /data --console-address \":9001\"\n\n[Install]\nWantedBy=multi-user.target\n","enabled":false,"name":"minio-forgejo.service"},{"contents":"[Unit]\nDescription=run lldap\nRequires=systemd-sysupdate.service\nAfter=systemd-sysupdate.service\n\n[Service]\nType=simple\nRemainAfterExit=true\nWorkingDirectory=/home/flatcar\nUser=lldap\nGroup=lldap\nExecStartPre=-/usr/bin/docker stop lldap-forgejo\nExecStartPre=-/usr/bin/docker rm lldap-forgejo\nExecStartPre=/usr/bin/docker pull harbor.reyokatsu.net/auth/lldap:stable\nExecStart=/usr/bin/docker run --name lldap-forgejo\\\n  -p 3890:3890\\\n  -p 17170:17170\\\n  -v /home/flatcar/.lldap-forgejo/data:/data\\\n  --env-file /home/flatcar/.lldap-forgejo/.env\\\n  harbor.reyokatsu.net/auth/lldap:stable\n[Install]\nWantedBy=multi-user.target\n","enabled":false,"name":"lldap-forgejo.service"}]}}
