{"ignition":{"version":"3.4.0"},"passwd":{"users":[{"groups":["sudo","docker"],"name":"flatcar","sshAuthorizedKeys":["ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIGb+CIf0OxImP83No/vnahM5YFb2Ucb9DXqBYaCvY7yv K-Desktop01","ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIN0LxJ3sUd6GM8a7M6WT4Sw5Pcw7s5hasTbVE8/6CvPH ubu-Ansible","ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIGEOdiXCp1MbuUfVJR3k4a2EvbgTytjXBoeYH8GytOfv K-MacBookAir m3"]}]},"storage":{"files":[{"path":"/etc/systemd/resolved.conf.d/DNS.conf","contents":{"compression":"","source":"data:,%5BResolve%5D%0ADNS%3D172.20.0.1%0A"}},{"path":"/home/flatcar/.alloy/config.alloy","contents":{"compression":"gzip","source":"data:;base64,H4sIAAAAAAAC/2SMTcrCMBRF51nFJQvIa/vxIRRcS3naaB+2SciPHUj2LinixOG9h3NW/xCzR8kW+h75xo6n9mm8FGDdHLy4fAygxBVn6CXnMBL1p8EMnfk3w/jXdx01jTgIPXsKJS1aHRIRLpzkOnHJyydEBJRko+PNtiLPmzj9RYFT2n2cf1FVQFVVvQMAAP//s5P8vrcAAAA="}}],"links":[{"overwrite":true,"path":"/etc/systemd/system/multi-user.target.wants/docker.service","hard":false,"target":"/usr/lib/systemd/system/docker.service"}]},"systemd":{"units":[{"enabled":true,"name":"docker.service"},{"contents":"[Unit]\nDescription=Restart systemd-networkd\nAfter=network-online.target\nWants=network-online.target\n\n[Service]\nType=oneshot\nRemainAfterExit=true\nExecStart=/bin/systemctl restart systemd-networkd\n\n[Install]\nWantedBy=multi-user.target\n","enabled":true,"name":"restart-systemd-networkd.service"},{"contents":"[Unit]\nDescription=timezone settings\n\n[Service]\nType=oneshot\nRemainAfterExit=true\nExecStart=/bin/timedatectl set-timezone Asia/Tokyo\n\n[Install]\nWantedBy=multi-user.target\n","enabled":true,"name":"set-timezone.service"},{"contents":"[Unit]\nDescription=run node-exporter container\nRequires=docker.service\nAfter=docker.service\n\n[Service]\nType=simple\nExecStartPre=-/usr/bin/docker stop node_exporter\nExecStartPre=-/usr/bin/docker rm node_exporter\nExecStartPre=/usr/bin/docker pull prom/node-exporter\nExecStart=/usr/bin/docker run --rm --name node_exp -p 9100:9100 prom/node-exporter\n\n[Install]\nWantedBy=multi-user.target\n","enabled":true,"name":"node-exporter.service"},{"contents":"[Unit]\nDescription=run Grafana Alloy container\nRequires=docker.service\nAfter=docker.service\n\n[Service]\nType=simple\nExecStartPre=-/usr/bin/docker stop alloy\nExecStartPre=-/usr/bin/docker rm alloy\nExecStartPre=/usr/bin/docker pull grafana/alloy:latest\nExecStart=/usr/bin/docker run --rm --name alloy -v /home/flatcar/.alloy/config.alloy:/etc/alloy/config.alloy -p 12345:12345 grafana/alloy:latest run --server.http.listen-addr=0.0.0.0:12345 --storage.path=/var/lib/alloy/data /etc/alloy/config.alloy\n\n[Install]\nWantedBy=multi-user.target\n","enabled":true,"name":"alloy.service"}]}}
